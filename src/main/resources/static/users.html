<!doctype html>
<html lang="en">
<head>
    <meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
    <!-- For tutorial -->
    <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/11.5.0/highlight.min.js" defer></script>
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/11.5.0/styles/atom-one-dark.min.css">
    <link rel="stylesheet" href="./style.css">
    <title>Memes</title>
    <script src="https://unpkg.com/htmx.org@1.9.3"></script>
    <script src="https://unpkg.com/htmx.org/dist/ext/client-side-templates.js"></script>
    <script src="https://unpkg.com/nunjucks@latest"></script>
    <script src="https://unpkg.com/htmx.org/dist/ext/json-enc.js"></script>
    <script src="https://unpkg.com/htmx.org/dist/ext/response-targets.js"></script>
    <script src="../javascript-helpers.js"></script>
</head>
<body hx-ext="client-side-templates,response-targets,json-enc">


//-------------------------------------------------------------------------------------

<h1>Your daily dose of memes ✌️</h1>

<button class="redButton" hx-get="http://localhost:8080/memes-api/random-meme"
        hx-target=".output2"
        nunjucks-template="template1"
>MAKE ME LAUGH!
</button>

<section class="output2"></section>
//-------------------------------------------------------------------------------------

<form hx-post="http://localhost:8080/memes-api/memes"
      hx-swap="beforeend"
      hx-target="#output3"
      nunjucks-template="addedElement">
    <label for="title">Provide Title:</label>
    <input type="text" id="title" name="title">
    <br>
    <label for="imageUrl">Provide imageUrl:</label>
    <input type="text" id="imageUrl" name="imageUrl">
    <br>
    <label for="creator">Provide creator:</label>
    <input type="text" id="creator" name="creator">
    <br>
    <label for="upVotes">Provide upVotes:</label>
    <input type="text" id="upVotes" name="upVotes">
    <br>
    <button type="submit">Emit POST request</button>
</form>
//-------------------------------------------------------------------------------------

<section class="detailWindow"></section>

<h1>Overview of all memes</h1>
<div hx-get="http://localhost:8080/memes-api/memes"
     hx-target="#output3"
     nunjucks-template="listElement"
     hx-trigger="load">
</div>

<section id="output3" class="memeOverview"></section>

//-------------------------------------------------------------------------------------

<template id="template1">
    <div class="memeContainer">
        <h2>{{title}}</h2>
        <img src={{imageUrl}}>
    </div>
</template>

<template id="addedElement">
    <div class="memeElement">
        <h3>{{title}}</h3>
        <button hx-get="http://localhost:8080/memes-api/memes/{{id}}"
                hx-target=".detailWindow"
                nunjucks-template="Details">
            Show Details
        </button>
    </div>
</template>

<template id="listElement">
    {% for meme in memeList %}
    <div class="memeElement">
        <h3>{{meme.title}}</h3>
        <button hx-get="http://localhost:8080/memes-api/memes/{{meme.id}}"
                hx-target=".detailWindow"
                nunjucks-template="Details"
        >Show Details
        </button>
    </div>
    {% endfor %}
</template>

<template id="Details">
    <h3>Meme-Title: {{title}}</h3>
    <div class="memeContainer">
        <img src={{imageUrl}}>
        <p>Created by: {{creator}} </p>
        <p>Upvotes: {{upVotes}} </p>
    </div>
</template>

</body>
</html>